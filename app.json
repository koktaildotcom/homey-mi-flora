{
    "id": "com.mi.flora",
    "sdk": 2,
    "name": {
        "en": "Xiaomi Mi Flora",
        "nl": "Xiaomi Mi Flora"
    },
    "description": {
        "en": "Integrate Xiaomi mi flora sensor into Homey",
        "nl": "Integreer Xiaomi mi flora sensor in Homey"
    },
    "category": [
        "tools",
        "climate",
        "appliances"
    ],
    "permissions": [],
    "version": "2.0.8",
    "compatibility": ">=1.5.0",
    "athomForumDiscussionId": 5030,
    "tags": {
        "en": [
            "xiaomi",
            "xiaomi",
            "xiaomi",
            "mi",
            "plant",
            "flower",
            "flora",
            "sensor",
            "temperature",
            "luminance",
            "humidity",
            "nutrition"
        ],
        "nl": [
            "xiaomi",
            "xiaomi",
            "mi",
            "plant",
            "flower",
            "flora",
            "sensor",
            "temperatuur",
            "licht",
            "vochtigheid",
            "voeding"
        ]
    },
    "images": {
        "small": "/assets/images/small.png",
        "large": "/assets/images/large.png"
    },
    "author": {
        "name": "Leendert De Kok",
        "email": "koktaildotcom@hotmail.com"
    },
    "contributing": {
        "donate": {
            "paypal": {
                "username": "koktaildotcom"
            }
        }
    },
    "capabilities": {
        "flora_measure_fertility": {
            "type": "number",
            "title": {
                "en": "Conductivity",
                "nl": "Geleidingsvermogen"
            },
            "getable": true,
            "setable": false,
            "units": {
                "en": "µS/cm",
                "nl": "µS/cm"
            },
            "min": 0,
            "max": 5000,
            "step": 1
        },
        "flora_measure_moisture": {
            "type": "number",
            "title": {
                "en": "Moisture",
                "nl": "Vochtigheid"
            },
            "getable": true,
            "setable": false,
            "units": {
                "en": "%",
                "nl": "%"
            },
            "min": 0,
            "max": 100,
            "step": 1
        }
    },
    "drivers": [
        {
            "id": "ropot",
            "name": {
                "en": "Xiaomi mi flora pot",
                "nl": "Xiaomi mi flora pot"
            },
            "images": {
                "small": "drivers/ropot/assets/images/small.png",
                "large": "drivers/ropot/assets/images/large.png"
            },
            "class": "sensor",
            "capabilities": [
                "measure_temperature",
                "flora_measure_fertility",
                "flora_measure_moisture",
                "measure_battery"
            ],
            "pair": [
                {
                    "id": "start"
                },
                {
                    "id": "list_my_devices",
                    "template": "list_devices",
                    "navigation": {
                        "next": "add_my_devices"
                    }
                },
                {
                    "id": "add_my_devices",
                    "template": "add_devices"
                }
            ],
            "settings": [
                {
                    "type": "group",
                    "label": {
                        "en": "Device info",
                        "nl": "Apparaat informatie"
                    },
                    "children": [
                        {
                            "id": "firmware_version",
                            "type": "label",
                            "label": {
                                "en": "Firmware version",
                                "nl": "Firmware versie"
                            },
                            "value": ""
                        },
                        {
                            "id": "last_updated",
                            "type": "label",
                            "label": {
                                "en": "Last updated",
                                "nl": "Laatste update"
                            },
                            "value": ""
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Temperature (°C)",
                        "nl": "Temperatuur (°C)"
                    },
                    "children": [
                        {
                            "id": "measure_temperature_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            }
                        },
                        {
                            "id": "measure_temperature_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            }
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Nutrition (µS/cm)",
                        "nl": "Voeding (µS/cm)"
                    },
                    "children": [
                        {
                            "id": "flora_measure_fertility_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            }
                        },
                        {
                            "id": "flora_measure_fertility_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            }
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Moisture (%)",
                        "nl": "Vochtigheid (%)"
                    },
                    "children": [
                        {
                            "id": "flora_measure_moisture_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            }
                        },
                        {
                            "id": "flora_measure_moisture_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            }
                        }
                    ]
                }
            ],
            "mobile": {
                "components": [
                    {
                        "id": "icon"
                    },
                    {
                        "id": "battery",
                        "capabilities": [
                            "measure_battery"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_temperature",
                            "flora_measure_fertility",
                            "flora_measure_moisture"
                        ],
                        "options": {
                            "icons": {
                                "measure_temperature": "/assets/temperature.svg",
                                "flora_measure_fertility": "/assets/nutritions.svg",
                                "flora_measure_moisture": "/assets/moisture.svg"
                            }
                        }
                    }
                ]
            }
        },
        {
            "id": "flora",
            "name": {
                "en": "Xiaomi mi flora sensor",
                "nl": "Xiaomi mi flora sensor"
            },
            "images": {
                "small": "drivers/flora/assets/images/small.png",
                "large": "drivers/flora/assets/images/large.png"
            },
            "class": "sensor",
            "capabilities": [
                "measure_temperature",
                "measure_luminance",
                "flora_measure_fertility",
                "flora_measure_moisture",
                "measure_battery"
            ],
            "pair": [
                {
                    "id": "start"
                },
                {
                    "id": "list_my_devices",
                    "template": "list_devices",
                    "navigation": {
                        "next": "add_my_devices"
                    }
                },
                {
                    "id": "add_my_devices",
                    "template": "add_devices"
                }
            ],
            "settings": [
                {
                    "type": "group",
                    "label": {
                        "en": "Device info",
                        "nl": "Apparaat informatie"
                    },
                    "children": [
                        {
                            "id": "firmware_version",
                            "type": "label",
                            "label": {
                                "en": "Firmware version",
                                "nl": "Firmware versie"
                            },
                            "value": ""
                        },
                        {
                            "id": "last_updated",
                            "type": "label",
                            "label": {
                                "en": "Last updated",
                                "nl": "Laatste update"
                            },
                            "value": ""
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Temperature (°C)",
                        "nl": "Temperatuur (°C)"
                    },
                    "children": [
                        {
                            "id": "measure_temperature_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            },
                            "hint": {
                                "en": "The minimal threshold value for temperature.",
                                "nl": "De minimale grenswaarde voor temperatuur."
                            }
                        },
                        {
                            "id": "measure_temperature_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            },
                            "hint": {
                                "en": "The maximum threshold value for temperature.",
                                "nl": "De maximale grenswaarde voor temperatuur."
                            }
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Luminance (lux)",
                        "nl": "Lichtintensiteit (lux)"
                    },
                    "children": [
                        {
                            "id": "measure_luminance_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            },
                            "hint": {
                                "en": "The minimal threshold value for luminance.",
                                "nl": "De minimale grenswaarde voor lichtintensiteit."
                            }
                        },
                        {
                            "id": "measure_luminance_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            },
                            "hint": {
                                "en": "The maximum threshold value for luminance.",
                                "nl": "De maximale grenswaarde voor lichtintensiteit."
                            }
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Nutrition (µS/cm)",
                        "nl": "Voeding (µS/cm)"
                    },
                    "children": [
                        {
                            "id": "flora_measure_fertility_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            },
                            "hint": {
                                "en": "The minimal threshold value for nutrition.",
                                "nl": "De minimale grenswaarde voor voeding."
                            }
                        },
                        {
                            "id": "flora_measure_fertility_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            },
                            "hint": {
                                "en": "The maximum threshold value for nutrition.",
                                "nl": "De maximale grenswaarde voor voeding."
                            }
                        }
                    ]
                },
                {
                    "type": "group",
                    "label": {
                        "en": "Moisture (%)",
                        "nl": "Vochtigheid (%)"
                    },
                    "children": [
                        {
                            "id": "flora_measure_moisture_min",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "min",
                                "nl": "min"
                            },
                            "hint": {
                                "en": "The minimal threshold value for moisture.",
                                "nl": "De minimale grenswaarde voor vochtigheid."
                            }
                        },
                        {
                            "id": "flora_measure_moisture_max",
                            "type": "number",
                            "value": 0,
                            "label": {
                                "en": "max",
                                "nl": "max"
                            },
                            "hint": {
                                "en": "The maximum threshold value for moisture.",
                                "nl": "De maximale grenswaarde voor vochtigheid."
                            }
                        }
                    ]
                }
            ],
            "mobile": {
                "components": [
                    {
                        "id": "icon"
                    },
                    {
                        "id": "battery",
                        "capabilities": [
                            "measure_battery"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_temperature",
                            "measure_luminance",
                            "flora_measure_fertility",
                            "flora_measure_moisture"
                        ],
                        "options": {
                            "icons": {
                                "measure_temperature": "/assets/temperature.svg",
                                "measure_luminance": "/assets/luminance.svg",
                                "flora_measure_fertility": "/assets/nutritions.svg",
                                "flora_measure_moisture": "/assets/moisture.svg"
                            }
                        }
                    }
                ]
            }
        }
    ],
    "flow": {
        "triggers": [
            {
                "id": "sensor_changed",
                "title": {
                    "en": "A sensor value is changed",
                    "nl": "Een sensor waarde is veranderd"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    },
                    {
                        "name": "device",
                        "title": {
                            "en": "device",
                            "nl": "apparaat"
                        },
                        "example": {
                            "en": "Flowercare 1",
                            "nl": "Flowercare 1"
                        }
                    }
                ]
            },
            {
                "id": "sensor_updated",
                "title": {
                    "en": "A sensor value is updated",
                    "nl": "Een sensor waarde is geupdate"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    },
                    {
                        "name": "device",
                        "title": {
                            "en": "device",
                            "nl": "apparaat"
                        },
                        "example": {
                            "en": "Flowercare 1",
                            "nl": "Flowercare 1"
                        }
                    }
                ]
            },
            {
                "id": "sensor_threshold_min_exceeds",
                "title": {
                    "en": "Sensor value is below the configured threshold",
                    "nl": "Sensor waarde is beneden de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    },
                    {
                        "name": "device",
                        "title": {
                            "en": "device",
                            "nl": "apparaat"
                        },
                        "example": {
                            "en": "Flowercare 1",
                            "nl": "Flowercare 1"
                        }
                    }
                ]
            },
            {
                "id": "sensor_threshold_max_exceeds",
                "title": {
                    "en": "Sensor value is above the configured threshold",
                    "nl": "Sensor waarde is boven de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    },
                    {
                        "name": "device",
                        "title": {
                            "en": "device",
                            "nl": "apparaat"
                        },
                        "example": {
                            "en": "Flowercare 1",
                            "nl": "Flowercare 1"
                        }
                    }
                ]
            },
            {
                "id": "sensor_outside_threshold",
                "title": {
                    "en": "Sensor value is outside the configured threshold",
                    "nl": "Sensor waarde is buiten de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    },
                    {
                        "name": "device",
                        "title": {
                            "en": "device",
                            "nl": "apparaat"
                        },
                        "example": {
                            "en": "Flowercare 1",
                            "nl": "Flowercare 1"
                        }
                    }
                ]
            },
            {
                "id": "device_sensor_changed",
                "title": {
                    "en": "A sensor value is changed",
                    "nl": "Een sensor waarde is veranderd"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    }
                ],
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "driver_id=flora|ropot"
                    }
                ]
            },
            {
                "id": "device_sensor_updated",
                "title": {
                    "en": "A sensor value is updated",
                    "nl": "Een sensor waarde is geupdate"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    }
                ],
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "driver_id=flora|ropot"
                    }
                ]
            },
            {
                "id": "device_sensor_threshold_min_exceeds",
                "title": {
                    "en": "Sensor value is below the configured threshold",
                    "nl": "Sensor waarde is beneden de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    }
                ],
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "driver_id=flora|ropot"
                    }
                ]
            },
            {
                "id": "device_sensor_threshold_max_exceeds",
                "title": {
                    "en": "Sensor value is above the configured threshold",
                    "nl": "Sensor waarde is boven de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    }
                ],
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "driver_id=flora|ropot"
                    }
                ]
            },
            {
                "id": "device_sensor_outside_threshold",
                "title": {
                    "en": "Sensor value is outside the configured threshold",
                    "nl": "Sensor waarde is buiten de gestelde drempel"
                },
                "tokens": [
                    {
                        "name": "report",
                        "title": {
                            "en": "report",
                            "nl": "rapport"
                        },
                        "example": {
                            "en": "The moisture (22%) is to low. This can be at least 30%.",
                            "nl": "De vochtigheid (22%) is te laag. Deze mag minimaal 30% zijn."
                        }
                    },
                    {
                        "name": "value",
                        "title": {
                            "en": "value",
                            "nl": "waarde"
                        },
                        "example": {
                            "en": "22.5",
                            "nl": "22.5"
                        }
                    },
                    {
                        "name": "sensor",
                        "title": {
                            "en": "sensor",
                            "nl": "sensor"
                        },
                        "example": {
                            "en": "Moisture",
                            "nl": "Vochtigheid"
                        }
                    }
                ],
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "driver_id=flora|ropot"
                    }
                ]
            }
        ],
        "conditions": [
            {
                "id": "measure_temperature_threshold",
                "title": {
                    "en": "De plant !{{has not|has}} a correct temperature.",
                    "nl": "De plant !{{heeft niet|heeft}} de juiste temperatuur."
                },
                "hint": {
                    "en": "Use this card to determine if the plant has a correct temperature.",
                    "nl": "Gebruik deze kaart om te bepalen of de plant de juiste temperatuur heeft."
                },
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "capabilities=measure_temperature"
                    }
                ]
            },
            {
                "id": "measure_luminance_threshold",
                "title": {
                    "en": "The plant !{{has not|has}} enough sunlight.",
                    "nl": "De plant !{{heeft niet|heeft}} genoeg zonlicht."
                },
                "hint": {
                    "en": "Use this card to determine if the plant has enough sunlight.",
                    "nl": "Gebruik deze kaart om te bepalen of de plant genoeg zonlicht heeft."
                },
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "capabilities=measure_luminance"
                    }
                ]
            },
            {
                "id": "flora_measure_fertility_threshold",
                "title": {
                    "en": "The plant !{{has not|has}} enough nutritions.",
                    "nl": "De plant !{{heeft niet|heeft}} genoeg voeding."
                },
                "hint": {
                    "en": "Use this card to determine if the plant has enough nutritions.",
                    "nl": "Gebruik deze kaart om te bepalen of de plant genoeg voeding heeft."
                },
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "capabilities=measure_luminance"
                    }
                ]
            },
            {
                "id": "flora_measure_moisture_threshold",
                "title": {
                    "en": "The plant !{{has not|has}} enough moisture.",
                    "nl": "De plant !{{heeft niet|heeft}} genoeg vocht."
                },
                "hint": {
                    "en": "Use this card to determine if the plant has enough moisture.",
                    "nl": "Gebruik deze kaart om te bepalen of de plant genoeg vocht heeft."
                },
                "args": [
                    {
                        "name": "device",
                        "type": "device",
                        "filter": "capabilities=flora_measure_moisture"
                    }
                ]
            }
        ]
    }
}
